/*! MrSlyde jQuery plugin version 0.3.0 (https://github.com/jamwaffles/MrSlyde), compiled on 19/07/2013 */
!function(a){a.fn.mrslyde=function(b){function c(a){if(document.documentElement.className.indexOf("slyding")>-1){event.preventDefault?event.preventDefault():event.returnValue=!1;var b=d.opt,c=d.handle,e=d.container,f=d.input,g=a.pageX||a.clientX||event.touches[0].pageX;if(null!==e)if(m(e,b,g,c),b.range){var h=e.find(".range-upper"),i=e.find(".range-lower");o(c,e.find(".handle").not(".mousedown"),g),p(i,h);var j=k(l(i),b),q=k(l(h),b);n([j,q],d.input,b)}else n(k(l(e.find(".handle")),b),f,b)}}var d=null,e=a.extend({min:0,max:100,defaultValue:50,stepSize:10,snap:!0,showValues:!0,precision:0,range:!1},b),f=a('<div class="mrslyde">			<div class="slider">				<a class="handle"></a><div class="track"></div>			</div>			<div class="values">				<span class="left"></span><span class="center"></span><span class="right"></span>			</div>		</div>'),g=function(a,b,c){return Math.min(c,Math.max(a,b))},h=function(a,b){return Math.round(a/b)*b},i=function(a,b){return parseFloat(a).toFixed(b)},j=function(a,b,c){var d=b.prev().data("ms"),e=void 0!==c?c:b.find(".handle"),f=b.find(".track");return e[0].style.left=(f[0].offsetWidth-e[0].offsetWidth)*((a-d.min)/(d.max-d.min))},k=function(a,b){return b.min+(b.max-b.min)*a},l=function(a){return a.position().left/(a.nextAll(".track").outerWidth()-a.outerWidth())},m=function(a,b,c,d){var e=void 0!==d?d:a.find(".handle").first(),f=e.outerWidth(),i=e.nextAll(".track"),j=i[0].offsetWidth-f,k=i.offset().left+f/2,l=k+i[0].offsetWidth-f,m=g(c,k,l)-k;return b.snap&&(m=h(m,j/((b.max-b.min)/b.stepSize))),e[0].style.left=m,m/j},n=function(a,b,c){return"object"!=typeof a?(a=i(h(g(a,c.min,c.max),c.stepSize),c.precision),b.val(a),c.showValues&&b.next().find("span.center").text(a)):(lower=i(h(g(a[0],c.min,c.max),c.stepSize),c.precision),upper=i(h(g(a[1],c.min,c.max),c.stepSize),c.precision),b.val(lower+","+upper),c.showValues&&b.next().find("span.center").html(lower+" &#8211; "+upper)),a},o=function(a,b,c){var d=0===a.index(),e=a[0].offsetWidth,f=a.nextAll(".track"),h=f[0].offsetWidth-e,i=d?b.offset().left-e:f.offset().left+h,j=d?f.offset().left:b.offset().left+e;a[0].style.left=g(c-e/2,j,i)-f.offset().left},p=function(a,b){var c=a.nextAll(".track"),d=c.children();d[0].style.left=a.position().left+a[0].offsetWidth,d[0].style.right=c.width()-b.position().left},q=function(a,b){if(a.data("msstepsize")&&(b.stepSize=a.data("msstepsize")),a.data("msmin")&&(b.min=h(a.data("msmin"),b.stepSize)),a.data("msmax")&&(b.max=h(a.data("msmax"),b.stepSize)),void 0!=a.data("mssnap")&&("false"==a.data("mssnap")||"0"==a.data("mssnap")?b.snap=!1:("true"==a.data("mssnap")||"1"==a.data("mssnap"))&&(b.snap=!0)),void 0!=a.data("msshowvalues")&&("false"==a.data("msshowvalues")||"0"==a.data("msshowvalues")?b.showValues=!1:("true"==a.data("msshowvalues")||"1"==a.data("msshowvalues"))&&(b.showValues=!0)),a.data("msprecision")&&(b.precision=a.data("msprecision")),a.val().length&&(b.defaultValue=h(g(a.val(),b.min,b.max),b.stepSize)),a.data("msrange")&&(b.range=!0,a.val().length)){var c=a.val().split(",");b.defaultValue=[h(g(parseInt(c[0]),b.min,b.max),b.stepSize),h(g(parseInt(c[1]),b.min,b.max),b.stepSize)]}},r=function(b,c,d){if(b.hide(),c.showValues?(d.find("span.left").text(c.min),d.find("span.center").text(c.defaultValue),d.find("span.right").text(c.max)):d.remove("div.values"),d.width(b.outerWidth()),d.find(".handle").css({left:d.offset().left}),b.attr("autocomplete","off"),b.data("ms",c),b.addClass("mrslyde").after(d),c.range){var e=b.val().split(",");d.find("span.left, span.right").hide(),d.addClass("range"),d.find(".track").append(a("<div />").addClass("range-bar"));var f=d.find(".handle"),g=f.clone().addClass("range-upper");f.after(g).addClass("range-lower"),n(c.defaultValue,b,c),j(e[0],b.next(),f),j(e[1],b.next(),g),p(f,g)}else n(c.defaultValue,b,c),j(b.val(),b.next())};return a("body").off(".mrslyde"),a("body").on("mousedown touchstart",function(b){var c=a(b.target);c.hasClass("handle")&&(b.preventDefault(),d={input:c.closest(".mrslyde").prev(),container:c.closest(".mrslyde"),handle:c},d.opt=d.input.data("ms"),d.container.addClass("slyding"),d.input.trigger("slydestart"),c.addClass("mousedown"),"touchstart"===b.type&&c.addClass("touch"),a("html").addClass("slyding"))}),void 0!==document.addEventListener?(document.addEventListener("mousemove",c,!1),document.addEventListener("touchmove",c,!1)):document.attachEvent&&document.attachEvent("onmousemove",c),a("body").on("mouseup touchend",function(){if(null===d)return!1;var b=d.container,c=d.handle;b.removeClass("slyding"),c.removeClass("mousedown touch"),a("html").removeClass("slyding"),d.input.trigger("slydeend"),d=null}),a("body").on("change","input.mrslyde",function(){j(n(a(this).val(),a(this),a(this).data("ms")),a(this).next())}),this.each(function(){var b=a(this),c=f.clone(),d=a.extend(!0,{},e);q(b,d),r(b,d,c)})}}(jQuery);